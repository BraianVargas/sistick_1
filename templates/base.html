<!DOCTYPE html>
<html lang="es">

<head>
     <meta charset="UTF-8">
     <title>SisTick</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<style>
     body {
          background-color: #CCFFCC;
     }

     .active a {
          background-color: #008cba;
     }

     .sidebar {
          background-color: #f1f1f1;
          height: 100%;
          position: fixed;
          position: absolute;
          left: 0;
          top: 0;
          z-index: 0;
          width: 250px;
          padding-top: 1.2em;
     }

     

     .dropdown {
          display: flex;
          justify-content: baseline;
     }

     @media only screen and (max-width: 767px) {
          .hide {
               display: none;
          }
     }

     @media screen and (min-width: 992px) {
          .main{
               margin-left: 250px; 
               width:100%;
               
               padding: 20px;
          }
          .hidepc {
               display: none;
          }
     }
</style>

<body>
     <nav class="navbar navbar-expand-lg navbar-light bg-dark shadow">
          <div class="container-fluid">
               <a class="navbar-brand fs-3 link-light hidepc" href="/">SisTick</a>
               <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <i class="bi bi-list bg-light"></i>
               </button>
               <div class="collapse nav navbar-collapse justify-content-end" id="navbarNav">
                    {% if logged %}
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 hidepc text-light">
                         <li class="nav-item">
                              <a class="nav-link link-light " aria-current="page"
                                   href="{{url_for('user_blueprint.index')}}"><i class="bi bi-house-fill"></i>
                                   Inicio</a>
                         </li>
                         <li class="nav-item">
                              <a class="nav-link link-light" href="{{url_for('user_blueprint.index')}}"><i
                                        class="bi bi-person-fill"></i> Usuarios</a>
                         </li>

                         <li class="nav-item">

                              <div class="list-group-item list-group-item-action">
                                   <p class="link-light">
                                        <i class="bi bi-journal-text"></i>
                                        Tickets
                                   </p>
                                   <div class="list-group">
                                        <a href="{{url_for('ticket_blueprint.index')}}"
                                             class="bg-dark link-light list-group-item list-group-item-action {% if request.path == url_for('user_blueprint.index') %} active {% endif %}">
                                             Todos
                                        </a>
                                        <a href="{{url_for('ticket_blueprint.assignedToMe')}}"
                                             class="bg-dark link-light list-group-item list-group-item-action {% if request.path == url_for('user_blueprint.index') %} active {% endif %}">
                                             Asignado a mi
                                        </a>
                                   </div>
                              </div>
                         </li>
                         {% if admin == "admin" %}
                         <li class="nav-item">
                              <a class="nav-link link-light" href="{{url_for('user_blueprint.index')}}"><i
                                        class="bi bi-graph-up"></i> Reportes</a>
                         </li>
                         
                         {% endif %}

                         
                    </ul>
                    <ul class="me-auto mb-12 text-light">
                         <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle link-light" href="#" id="navbarDropdown" role="button"
                                   data-bs-toggle="dropdown" aria-expanded="false">
                                   {{ username.capitalize() }}
                              </a>
                              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                   <li><a class="dropdown-item" href="{{ url_for('index') }}">Configurar usuario</a>
                                   </li>
                                   <li><a class="dropdown-item" href="{{ url_for('user_blueprint.logout') }}">Cerrar
                                             sesión</a></li>
                              </ul>
                         </li>
                    </ul>
                    {% endif %}
               </div>
          </div>
     </nav>


     <div class="container-fluid mt-4">
          <div class="row">
               <div class="col-md-3 sidebar bg-dark hide m-auto" tabindex="0">
                    {% if logged %}
                    <div class="list-group hide bg-dark">
                         <a class="navbar-brand fs-3 link-light" href="/">SisTick</a>
                         <br>
                         <a href="{{url_for('index')}}"
                              class="list-group-item list-group-item-action {% if request.path == url_for('index') %} active {% endif %}">
                              <i class="bi bi-house-fill"></i>
                              Inicio
                         </a>
                         <a href="{{url_for('user_blueprint.index')}}"
                              class="list-group-item list-group-item-action {% if request.path == url_for('user_blueprint.index') %} active {% endif %}">
                              <i class="bi bi-person-fill"></i>
                              Usuarios
                         </a>
                         <div class="list-group-item list-group-item-action">
                              <p>
                                   <i class="bi bi-journal-text"></i>
                                   Tickets
                              </p>
                              <div class="list-group">
                                   <a href="{{url_for('ticket_blueprint.index')}}"
                                        class="list-group-item list-group-item-action bg-none {% if request.path == url_for('ticket_blueprint.index') %} active {% endif %}">
                                        Todos
                                   </a>
                                   <a href="{{url_for('ticket_blueprint.assignedToMe')}}"
                                        class="list-group-item list-group-item-action bg-none {% if request.path == url_for('ticket_blueprint.assignedToMe') %} active {% endif %}">
                                        Asignado a mi
                                   </a>
                              </div>
                         </div>

                         {% if admin == 'admin'%}
                         <a href="{{url_for('user_blueprint.index')}}"
                              class="list-group-item list-group-item-action {% if request.path == url_for('user_blueprint.index') %} active {% endif %}"><i
                                   class="bi bi-graph-up"></i>
                              Reportes
                         </a>
                         {% endif %}
                    </div>
                    {% else %}
                    <h4>Bienvenido al SisTick</h4>
                    <p>
                         Sistema de gestion de tickets.
                         <br>
                         Inicie sesion para continuar.
                    </p>
                    {% endif %}
               </div>
               <div class="col-lg-10">
                    {% if self.content()  %}
                    <div class="main">
                         <h1>{{ title }}</h1>
                         {% block content %}{% endblock %}
                    </div>
                    {% else %}
                    <div class="main">
                         <h4>Bienvenido al dashboard de administrador</h4>
                         <p>Desde aquí podrás gestionar a los usuarios, tickets y reportes de la plataforma.</p>
                    </div>
                    {% endif %}
               </div>
          </div>
     </div>
     </div>

     </div>

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
     </script>
</body>

</html>