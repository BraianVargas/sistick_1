{% extends "base.html" %}
{% block title %} Dashboard de usuario {% endblock %}
{% block content %}
<head>
     <style>
          table {
               width: 100%;
          }
          tr:first-child{
               border: solid 2px black;
               border-radius: 10px;
          }
     
          th, td {
               text-align: left;
               padding: 8px;
          }
     
          tr:nth-child(even){
               background-color: white;
          }
          
          th {
               background-color: var(--dark-mid-bg);
               opacity: .8;
               color: white;
          }
     
          input[type=text] {
               width: 80%;
               border: 1px black solid;
               padding: 12px 20px;
               margin: 8px 0;
               box-sizing: border-box;
               border: none;
               border-radius: 10px;
          }
     
          button {
               background-color: var(--btn-bg);
               color: white;
               padding: 12px 20px;
               border: none;
               cursor: pointer;
               border-radius: 15px;
               border: solid 2px black;
          }
     
          button:hover {
               background-color:  var(--hover-bg);
               transition: background-color .4s ease;
          }
     </style>
 </head>
 <body>
     <h1>Dashboard de Usuarios</h1>
     <div class="d-block m-auto">
          <input style="border:2px solid black;" type="text" id="search-box" placeholder="Buscar usuarios..." onkeyup="searchUsers()">
          <button style="border:2px solid black;" class="W-20" type="submit" onclick="searchUsers()">
               <i class="bi bi-search"></i>
          </button>
     </div>
     <table id="users-table">
         <tr>
             <th>Nombre</th>
             <th>Tipo de Usuario</th>
             <th>Ãšltimo Login</th>
             <th>Acciones</th>
         </tr>
         {% for user in users %}
          <tr>
               <td class="text-black">{{ user['username'].capitalize() }}</td>
               <td class="text-black">{{ user['admin'].capitalize() }}</td>
               <td class="text-black">
                    {% for log in logs %}
                         {% if (user.id == log.user_id)%}
                              {{ log.date }}
                         {% endif %}
                    {% endfor %}
               </td>
               <td>
                    {% if user['sysactive'] == '0' %}
                         <button onclick="{{url_for('static')}}">Activar</button>
                    {% else %}     
                         <button onclick="">Desactivar</button>
                    {% endif %}
               </td>
          </tr>
         {% endfor %}
     </table>
     <script>
         function searchUsers() {
             var input, filter, table, tr, td, i, txtValue;
             input = document.getElementById("search-box");
             filter = input.value.toUpperCase();
             table = document.getElementById("users-table");
             tr = table.getElementsByTagName("tr");
             for (i = 0; i < tr.length; i++) {
                 td = tr[i].getElementsByTagName("td")[0];
                 if (td) {
                     txtValue = td.textContent || td.innerText;
                     if (txtValue.toUpperCase().indexOf(filter) > -1) {
                         tr[i].style.display = "";
                     } else {
                         tr[i].style.display = "none";
                     }
                 }
             }
         }
 
     </script>
 </body>

{% endblock %}
